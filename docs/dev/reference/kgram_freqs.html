<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>k-gram Frequency Tables — kgram_freqs • kgrams</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="k-gram Frequency Tables — kgram_freqs" />
<meta property="og:description" content="Extract k-gram frequency counts from a text or a connection.Principal methods supported by objects of class kgram_freqs


query(): query k-gram counts from the table.
See query
probability(): compute word continuation and sentence probabilities
using Maximum Likelihood estimates. See probability.
language_model(): build a k-gram language model using various
probability smoothing techniques. See language_model.


" />


<meta name="robots" content="noindex">

<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">kgrams</a>
        <span class="version label label-danger" data-toggle="tooltip" data-placement="bottom" title="In-development version">0.1.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/kgrams.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/vgherard/kgrams/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>k-gram Frequency Tables</h1>
    <small class="dont-index">Source: <a href='https://github.com/vgherard/kgrams/blob/master/R/kgram_freqs.R'><code>R/kgram_freqs.R</code></a></small>
    <div class="hidden name"><code>kgram_freqs.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Extract k-gram frequency counts from a text or a connection.</p><h3 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Principal methods supported by objects of class <code>kgram_freqs</code></h3>

<ul>
<li><p><code><a href='query.html'>query()</a></code>: query k-gram counts from the table.
See <a href='query.html'>query</a></p></li>
<li><p><code><a href='probability.html'>probability()</a></code>: compute word continuation and sentence probabilities
using Maximum Likelihood estimates. See <a href='probability.html'>probability</a>.</p></li>
<li><p><code><a href='language_model.html'>language_model()</a></code>: build a k-gram language model using various
probability smoothing techniques. See <a href='language_model.html'>language_model</a>.</p></li>
</ul>


    </div>

    <pre class="usage"><span class='fu'>kgram_freqs</span><span class='op'>(</span><span class='va'>object</span>, <span class='va'>...</span><span class='op'>)</span>

<span class='co'># S3 method for numeric</span>
<span class='fu'>kgram_freqs</span><span class='op'>(</span>
  <span class='va'>object</span>,
  .preprocess <span class='op'>=</span> <span class='va'>identity</span>,
  .tknz_sent <span class='op'>=</span> <span class='va'>identity</span>,
  dict <span class='op'>=</span> <span class='cn'>NULL</span>,
  <span class='va'>...</span>
<span class='op'>)</span>

<span class='co'># S3 method for kgram_freqs</span>
<span class='fu'>kgram_freqs</span><span class='op'>(</span><span class='va'>object</span>, <span class='va'>...</span><span class='op'>)</span>

<span class='co'># S3 method for character</span>
<span class='fu'>kgram_freqs</span><span class='op'>(</span>
  <span class='va'>object</span>,
  <span class='va'>N</span>,
  .preprocess <span class='op'>=</span> <span class='va'>identity</span>,
  .tknz_sent <span class='op'>=</span> <span class='va'>identity</span>,
  dict <span class='op'>=</span> <span class='cn'>NULL</span>,
  open_dict <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/NULL.html'>is.null</a></span><span class='op'>(</span><span class='va'>dict</span><span class='op'>)</span>,
  verbose <span class='op'>=</span> <span class='cn'>TRUE</span>,
  <span class='va'>...</span>
<span class='op'>)</span>

<span class='co'># S3 method for connection</span>
<span class='fu'>kgram_freqs</span><span class='op'>(</span>
  <span class='va'>object</span>,
  <span class='va'>N</span>,
  .preprocess <span class='op'>=</span> <span class='va'>identity</span>,
  .tknz_sent <span class='op'>=</span> <span class='va'>identity</span>,
  dict <span class='op'>=</span> <span class='cn'>NULL</span>,
  open_dict <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/NULL.html'>is.null</a></span><span class='op'>(</span><span class='va'>dict</span><span class='op'>)</span>,
  verbose <span class='op'>=</span> <span class='cn'>TRUE</span>,
  max_lines <span class='op'>=</span> <span class='va'>max_lines</span>,
  batch_size <span class='op'>=</span> <span class='cn'>NULL</span>,
  <span class='va'>...</span>
<span class='op'>)</span>

<span class='fu'>process_sentences</span><span class='op'>(</span>
  <span class='va'>text</span>,
  <span class='va'>freqs</span>,
  .preprocess <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/attr.html'>attr</a></span><span class='op'>(</span><span class='va'>freqs</span>, <span class='st'>".preprocess"</span><span class='op'>)</span>,
  .tknz_sent <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/attr.html'>attr</a></span><span class='op'>(</span><span class='va'>freqs</span>, <span class='st'>".tknz_sent"</span><span class='op'>)</span>,
  open_dict <span class='op'>=</span> <span class='cn'>TRUE</span>,
  in_place <span class='op'>=</span> <span class='cn'>TRUE</span>,
  verbose <span class='op'>=</span> <span class='cn'>TRUE</span>,
  <span class='va'>...</span>
<span class='op'>)</span>

<span class='co'># S3 method for character</span>
<span class='fu'>process_sentences</span><span class='op'>(</span>
  <span class='va'>text</span>,
  <span class='va'>freqs</span>,
  .preprocess <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/attr.html'>attr</a></span><span class='op'>(</span><span class='va'>freqs</span>, <span class='st'>".preprocess"</span><span class='op'>)</span>,
  .tknz_sent <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/attr.html'>attr</a></span><span class='op'>(</span><span class='va'>freqs</span>, <span class='st'>".tknz_sent"</span><span class='op'>)</span>,
  open_dict <span class='op'>=</span> <span class='cn'>TRUE</span>,
  in_place <span class='op'>=</span> <span class='cn'>TRUE</span>,
  verbose <span class='op'>=</span> <span class='cn'>TRUE</span>,
  <span class='va'>...</span>
<span class='op'>)</span>

<span class='co'># S3 method for connection</span>
<span class='fu'>process_sentences</span><span class='op'>(</span>
  <span class='va'>text</span>,
  <span class='va'>freqs</span>,
  .preprocess <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/attr.html'>attr</a></span><span class='op'>(</span><span class='va'>freqs</span>, <span class='st'>".preprocess"</span><span class='op'>)</span>,
  .tknz_sent <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/attr.html'>attr</a></span><span class='op'>(</span><span class='va'>freqs</span>, <span class='st'>".tknz_sent"</span><span class='op'>)</span>,
  open_dict <span class='op'>=</span> <span class='cn'>TRUE</span>,
  in_place <span class='op'>=</span> <span class='cn'>TRUE</span>,
  verbose <span class='op'>=</span> <span class='cn'>TRUE</span>,
  max_lines <span class='op'>=</span> <span class='cn'>Inf</span>,
  batch_size <span class='op'>=</span> <span class='va'>max_lines</span>,
  <span class='va'>...</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>object</th>
      <td><p>any type allowed by the available methods. The type defines the
behaviour of <code>kgram_freqs()</code> as a default constructor, a copy
constructor or a constructor of a non-trivial object. See ‘Details’.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>further arguments passed to or from other methods.</p></td>
    </tr>
    <tr>
      <th>.preprocess</th>
      <td><p>a function taking a character vector as input and returning
a character vector as output. Optional preprocessing transformation
applied to text before k-gram tokenization. See  ‘Details’.</p></td>
    </tr>
    <tr>
      <th>.tknz_sent</th>
      <td><p>a function taking a character vector as input and
returning a character vector as output. Optional sentence tokenization step
applied to text after preprocessing and before k-gram tokenization. See
‘Details’.</p></td>
    </tr>
    <tr>
      <th>dict</th>
      <td><p>anything coercible to class
<a href='dictionary.html'>dictionary</a>. Optional pre-specified word dictionary.</p></td>
    </tr>
    <tr>
      <th>N</th>
      <td><p>a length one integer. Maximum order of k-grams to be considered.</p></td>
    </tr>
    <tr>
      <th>open_dict</th>
      <td><p><code>TRUE</code> or <code>FALSE</code>. If <code>TRUE</code>, any new
word encountered during processing not appearing in the original dictionary
is included into the dictionary. Otherwise, new words are replaced by an
unknown word token. It is by default <code>TRUE</code> if <code>dict</code> is
specified, <code>FALSE</code> otherwise.</p></td>
    </tr>
    <tr>
      <th>verbose</th>
      <td><p>Print current progress to the console.</p></td>
    </tr>
    <tr>
      <th>max_lines</th>
      <td><p>a length one positive integer or <code>Inf</code>.
Maximum number of lines to be read from the <code>connection</code>.
If <code>Inf</code>, keeps reading until the End-Of-File.</p></td>
    </tr>
    <tr>
      <th>batch_size</th>
      <td><p>a length one positive integer less than or equal to
<code>max_lines</code>.Size of text batches when reading text from
<code>connection</code>.</p></td>
    </tr>
    <tr>
      <th>text</th>
      <td><p>a character vector or a connection. Source of text from which
k-gram frequencies are to be extracted.</p></td>
    </tr>
    <tr>
      <th>freqs</th>
      <td><p>a <code>kgram_freqs</code> object, to which new k-gram counts from
<code>text</code> are to be added.</p></td>
    </tr>
    <tr>
      <th>in_place</th>
      <td><p><code>TRUE</code> or <code>FALSE</code>. Should the initial
<code>kgram_freqs</code> object be modified in place?</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A <code>kgram_freqs</code> class object: k-gram frequency table storing
k-gram counts from text. For <code>process_sentences()</code>, the updated
<code>kgram_freqs</code> object is returned invisibly if <code>in_place</code> is
<code>TRUE</code>, visibly otherwise.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>The function <code>kgram_freqs()</code> is a generic constructor for
objects of class <code>kgram_freqs</code>, i.e. k-gram frequency tables. The
constructor from <code>integer</code> returns an empty 'kgram_freqs' of fixed
order, with an optional
predefined dictionary (which can be empty) and <code>.preprocess</code> and
<code>.tknz_sent</code> functions to be used as defaults in other <code>kgram_freqs</code>
methods. The constructor from <code>kgram_freqs</code> returns a copy of an
existing object, and it is provided because, in general, <code>kgram_freqs</code>
objects have reference semantics, as discussed below.</p>
<p>The following discussion focuses on <code>process_sentences()</code> generic, as
well as on the <code>character</code> and <code>connection</code> methods of the
constructor <code>kgram_freqs()</code>. These functions extract k-gram
frequency counts from a text source, which may be either a character vector
or a connection. The second option is useful if one wants to avoid loading
the full text corpus in physical memory, allowing to process text from
different sources such as files, compressed files or URLs.</p>
<p>The returned object is of class <code>kgram_freqs</code> (a thin wrapper
around the internal C++ class where all k-gram computations take place).
<code>kgram_freqs</code> objects have methods for querying bare k-gram frequencies
(<a href='query.html'>query</a>) and maximum likelihood estimates of sentence
probabilities or word continuation probabilities
(see <a href='probability.html'>probability</a>)) . More importantly
<code>kgram_freqs</code> objects are used to create <a href='language_model.html'>language_model</a>
objects, which support various probability smoothing techniques.</p>
<p>The function <code>kgram_freqs()</code> is used to <em>construct</em> a new
<code>kgram_freqs</code> object, initializing it with the k-gram counts from
the <code>text</code> input, whereas <code>process_sentences()</code> is used to
add k-gram counts from a new <code>text</code> to an <em>existing</em>
<code>kgram_freqs</code> object, <code>freqs</code>. In this second case, the initial
object <code>freqs</code> can either be modified in place
(for <code>in_place == TRUE</code>, the default) or by making a copy
(<code>in_place == FALSE</code>), see the examples below.
The final object is returned invisibly when modifying in place,
visibly in the second case. It is worth to mention that modifying in place
a <code>kgram_freqs</code> object <code>freqs</code> will also affect
<code>language_model</code> objects created from <code>freqs</code> with
<code><a href='language_model.html'>language_model()</a></code>, which will also be updated with the new information.
If one wants to avoid this behaviour, one can make copies using either the
<code>kgram_freqs()</code> copy constructor, or the <code>in_place = FALSE</code>
argument.</p>
<p>The <code>dict</code> argument allows to provide an initial set of known
words. Subsequently, one can either work with such a closed dictionary
(<code>open_dict == FALSE</code>), or extended the dictionary with all
new words encountered during k-gram processing
(<code>open_dict == TRUE</code>)  .</p>
<p>The <code>.preprocess</code> and <code>.tknz_sent</code> functions are applied
<em>before</em> k-gram counting takes place, and are in principle
arbitrary transformations of the original text.
<em>After</em> preprocessing and sentence tokenization, each line of the
transformed input is presented to the k-gram counting algorithm as a separate
sentence (these sentences are implicitly padded
with <code>N - 1</code> Begin-Of-Sentence (BOS) and one End-Of-Sentence (EOS)
tokens, respectively. This is illustrated in the examples). For basic
usage, this package offers the utilities <a href='preprocess.html'>preprocess</a> and
<a href='tknz_sent.html'>tknz_sent</a>. Notice that, strictly speaking, there is
some redundancy in these two arguments, as the processed input to the k-gram
counting algorithm is <code>.tknz_sent(.preprocess(text))</code>.
They appear explicitly as separate arguments for two main reasons:</p><ul>
<li><p>The presence of <code>.tknz_sent</code> is a reminder of the
fact that sentences have to be explicitly separeted in different entries
of the processed input, in order for <code>kgram_freqs()</code> to append the
correct Begin-Of-Sentence and End-Of-Sentence paddings to each sentence.</p></li>
<li><p>At prediction time (e.g. with <a href='probability.html'>probability</a>), by default only
<code>.preprocess</code> is applied when computing conditional probabilities,
whereas both <code>.preprocess()</code> and <code>.tknz_sent()</code> are
applied when computing sentence absolute probabilities.</p></li>
</ul>

    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><a href='query.html'>query</a>, <a href='probability.html'>probability</a>
<a href='language_model.html'>language_model</a>, <a href='dictionary.html'>dictionary</a></p></div>
    <h2 class="hasAnchor" id="author"><a class="anchor" href="#author"></a>Author</h2>

    <p>Valerio Gherardi</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># Build a k-gram frequency table from a character vector</span>

<span class='va'>f</span> <span class='op'>&lt;-</span> <span class='fu'>kgram_freqs</span><span class='op'>(</span><span class='st'>"a b b a a"</span>, <span class='fl'>3</span><span class='op'>)</span>
<span class='va'>f</span>
</div><div class='output co'>#&gt; A k-gram frequency table.</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/base/summary.html'>summary</a></span><span class='op'>(</span><span class='va'>f</span><span class='op'>)</span>
</div><div class='output co'>#&gt; A k-gram frequency table.
#&gt; 
#&gt; Parameters:
#&gt; * N: 3
#&gt; * V: 2
#&gt; 
#&gt; Number of words in training corpus:
#&gt; * W: 6
#&gt; 
#&gt; Number of distinct k-grams with positive counts:
#&gt; * 1-grams:4
#&gt; * 2-grams:7
#&gt; * 3-grams:6</div><div class='input'><span class='fu'><a href='query.html'>query</a></span><span class='op'>(</span><span class='va'>f</span>, <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"a"</span>, <span class='st'>"b"</span><span class='op'>)</span><span class='op'>)</span> <span class='co'># c(3, 2)</span>
</div><div class='output co'>#&gt; [1] 3 2</div><div class='input'><span class='fu'><a href='query.html'>query</a></span><span class='op'>(</span><span class='va'>f</span>, <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"a b"</span>, <span class='st'>"a"</span> <span class='op'>%+%</span> <span class='fu'><a href='EOS.html'>EOS</a></span><span class='op'>(</span><span class='op'>)</span>, <span class='fu'><a href='EOS.html'>BOS</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%+%</span> <span class='st'>"a b"</span><span class='op'>)</span><span class='op'>)</span> <span class='co'># c(1, 1, 1)</span>
</div><div class='output co'>#&gt; [1] 1 1 1</div><div class='input'><span class='fu'><a href='query.html'>query</a></span><span class='op'>(</span><span class='va'>f</span>, <span class='st'>"a b b a"</span><span class='op'>)</span> <span class='co'># NA (counts for k-grams of order k &gt; 3 are not known)</span>
</div><div class='output co'>#&gt; [1] NA</div><div class='input'>
<span class='fu'>process_sentences</span><span class='op'>(</span><span class='st'>"b"</span>, <span class='va'>f</span><span class='op'>)</span>
<span class='fu'><a href='query.html'>query</a></span><span class='op'>(</span><span class='va'>f</span>, <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"a"</span>, <span class='st'>"b"</span><span class='op'>)</span><span class='op'>)</span> <span class='co'># c(3, 3): 'f' is updated in place</span>
</div><div class='output co'>#&gt; [1] 3 3</div><div class='input'>
<span class='va'>f1</span> <span class='op'>&lt;-</span> <span class='fu'>process_sentences</span><span class='op'>(</span><span class='st'>"b"</span>, <span class='va'>f</span>, in_place <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span>
<span class='fu'><a href='query.html'>query</a></span><span class='op'>(</span><span class='va'>f</span>, <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"a"</span>, <span class='st'>"b"</span><span class='op'>)</span><span class='op'>)</span> <span class='co'># c(3, 3): 'f' is copied</span>
</div><div class='output co'>#&gt; [1] 3 3</div><div class='input'><span class='fu'><a href='query.html'>query</a></span><span class='op'>(</span><span class='va'>f1</span>, <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"a"</span>, <span class='st'>"b"</span><span class='op'>)</span><span class='op'>)</span> <span class='co'># c(3, 4): the new 'f1' stores the updated counts</span>
</div><div class='output co'>#&gt; [1] 3 4</div><div class='input'>



<span class='co'># Build a k-gram frequency table from a file connection</span>

<span class='kw'>if</span> <span class='op'>(</span><span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>{</span>
<span class='va'>f</span> <span class='op'>&lt;-</span> <span class='fu'>kgram_freqs</span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/connections.html'>file</a></span><span class='op'>(</span><span class='st'>"myfile.txt"</span><span class='op'>)</span>, <span class='fl'>3</span><span class='op'>)</span>
<span class='op'>}</span>


<span class='co'># Build a k-gram frequency table from an URL connection</span>
<span class='kw'>if</span> <span class='op'>(</span><span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>{</span>
<span class='co'>### Shakespeare's "Much Ado About Nothing" (entire play)</span>
<span class='va'>con</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/connections.html'>url</a></span><span class='op'>(</span><span class='st'>"http://shakespeare.mit.edu/much_ado/full.html"</span><span class='op'>)</span>

<span class='co'># Apply some basic preprocessing</span>
<span class='va'>.preprocess</span> <span class='op'>&lt;-</span> <span class='kw'>function</span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span> <span class='op'>{</span>
        <span class='co'># Remove character names and locations (boldfaced in original html)</span>
        <span class='va'>x</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/grep.html'>gsub</a></span><span class='op'>(</span><span class='st'>"&lt;b&gt;[A-z]+&lt;/b&gt;"</span>, <span class='st'>""</span>, <span class='va'>x</span><span class='op'>)</span>
        <span class='co'># Remove other html tags</span>
        <span class='va'>x</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/grep.html'>gsub</a></span><span class='op'>(</span><span class='st'>"&lt;[^&gt;]+&gt;||&lt;[^&gt;]+$||^[^&gt;]+&gt;$"</span>, <span class='st'>""</span>, <span class='va'>x</span><span class='op'>)</span>
        <span class='co'># Apply standard preprocessing including lower-case</span>
        <span class='va'>x</span> <span class='op'>&lt;-</span> <span class='fu'>kgrams</span><span class='fu'>::</span><span class='fu'><a href='preprocess.html'>preprocess</a></span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span>
        <span class='kw'><a href='https://rdrr.io/r/base/function.html'>return</a></span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span>
<span class='op'>}</span>

<span class='va'>.tknz_sent</span> <span class='op'>&lt;-</span> <span class='kw'>function</span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span> <span class='op'>{</span>
        <span class='co'># Tokenize sentences keeping Shakespeare's punctuation</span>
        <span class='va'>x</span> <span class='op'>&lt;-</span> <span class='fu'>kgrams</span><span class='fu'>::</span><span class='fu'><a href='tknz_sent.html'>tknz_sent</a></span><span class='op'>(</span><span class='va'>x</span>, keep_first <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>
        <span class='co'># Remove empty sentences</span>
        <span class='va'>x</span> <span class='op'>&lt;-</span> <span class='va'>x</span><span class='op'>[</span><span class='va'>x</span> <span class='op'>!=</span> <span class='st'>""</span><span class='op'>]</span>
        <span class='kw'><a href='https://rdrr.io/r/base/function.html'>return</a></span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span>
<span class='op'>}</span>

<span class='va'>f</span> <span class='op'>&lt;-</span> <span class='fu'>kgram_freqs</span><span class='op'>(</span><span class='va'>con</span>, <span class='fl'>3</span>, <span class='va'>.preprocess</span>, <span class='va'>.tknz_sent</span>, batch_size <span class='op'>=</span> <span class='fl'>1000</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/summary.html'>summary</a></span><span class='op'>(</span><span class='va'>f</span><span class='op'>)</span>

<span class='fu'><a href='query.html'>query</a></span><span class='op'>(</span><span class='va'>f</span>, <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"leonato"</span>, <span class='st'>"thy"</span>, <span class='st'>"smartphones"</span><span class='op'>)</span><span class='op'>)</span> <span class='co'># c(145, 52, 0)</span>
<span class='op'>}</span>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Valerio Gherardi.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


