<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Classical k-gram Language Models • kgrams</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Classical k-gram Language Models">
<meta property="og:description" content="
        Tools for training and evaluating k-gram language models in R, 
        supporting several probability smoothing techniques, 
        perplexity computations, random text generation and more.">
<meta name="robots" content="noindex">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">kgrams</a>
        <span class="version label label-danger" data-toggle="tooltip" data-placement="bottom" title="In-development version">0.1.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="articles/kgrams.html">Get started</a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/vgherard/kgrams/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div id="kgrams" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#kgrams" class="anchor"></a>kgrams</h1></div>
<!-- badges: start -->

<p><code>kgrams</code> provides tools for training and evaluating <span class="math inline"><em>k</em></span>-gram language models, including several probability smoothing methods, perplexity computations, random text generation and more. It is based on an C++ backend (which can be used itself as a standalone library for <span class="math inline"><em>k</em></span>-gram based NLP) which makes <code>kgrams</code> fast, coupled with an accessible R API which aims at streamlining the process of model building, and can be suitable for small- and medium-sized NLP experiments, baseline model building, and for pedagogical purposes.</p>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<div id="released-version" class="section level4">
<h4 class="hasAnchor">
<a href="#released-version" class="anchor"></a>Released version</h4>
<p>You can install the latest release of <code>kgrams</code> from <a href="https://cran.r-project.org/web/packages/kgrams/index.html">CRAN</a> with:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">"kgrams"</span><span class="op">)</span></code></pre></div>
</div>
<div id="development-version" class="section level4">
<h4 class="hasAnchor">
<a href="#development-version" class="anchor"></a>Development version</h4>
<p>You can install the development version from <a href="https://github.com/vgherard/kgrams">GitHub</a> with:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># install.packages("devtools")</span>
<span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://devtools.r-lib.org//reference/remote-reexports.html">install_github</a></span><span class="op">(</span><span class="st">"vgherard/kgrams"</span><span class="op">)</span></code></pre></div>
</div>
</div>
<div id="example" class="section level2">
<h2 class="hasAnchor">
<a href="#example" class="anchor"></a>Example</h2>
<p>This example shows how to train a modified Kneser-Ney 4-gram model on Shakespeare’s “Much Ado About Nothing” using <code>kgrams</code>.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://vgherard.github.io/kgrams/">kgrams</a></span><span class="op">)</span>
<span class="co"># Get k-gram frequency counts from text, for k = 1:4</span>
<span class="va">freqs</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/kgram_freqs.html">kgram_freqs</a></span><span class="op">(</span><span class="fu">kgrams</span><span class="fu">::</span><span class="va"><a href="reference/much_ado.html">much_ado</a></span>, N <span class="op">=</span> <span class="fl">4</span><span class="op">)</span>
<span class="co"># Build modified Kneser-Ney 4-gram model, with discount parameters D1, D2, D3.</span>
<span class="va">mkn</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/language_model.html">language_model</a></span><span class="op">(</span><span class="va">freqs</span>, smoother <span class="op">=</span> <span class="st">"mkn"</span>, D1 <span class="op">=</span> <span class="fl">0.25</span>, D2 <span class="op">=</span> <span class="fl">0.5</span>, D3 <span class="op">=</span> <span class="fl">0.75</span><span class="op">)</span></code></pre></div>
<p>We can now use this <code>language_model</code> to compute sentence and word continuation probabilities:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Compute sentence probabilities</span>
<span class="fu"><a href="reference/probability.html">probability</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"did he break out into tears ?"</span>,
              <span class="st">"we are predicting sentence probabilities ."</span>
              <span class="op">)</span>, 
            model <span class="op">=</span> <span class="va">mkn</span>
            <span class="op">)</span>
<span class="co">#&gt; [1] 2.466856e-04 1.184963e-20</span>
<span class="co"># Compute word continuation probabilities</span>
<span class="fu"><a href="reference/probability.html">probability</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"tears"</span>, <span class="st">"pieces"</span><span class="op">)</span> <span class="op">%|%</span> <span class="st">"did he break out into"</span>, model <span class="op">=</span> <span class="va">mkn</span><span class="op">)</span>
<span class="co">#&gt; [1] 9.389238e-01 3.834498e-07</span></code></pre></div>
<p>Here are some sentences sampled from the language model’s distribution at temperatures <code>t = c(1, 0.1, 10)</code>:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Sample sentences from the language model at different temperatures</span>
<span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span><span class="op">(</span><span class="fl">840</span><span class="op">)</span>
<span class="fu"><a href="reference/sample_sentences.html">sample_sentences</a></span><span class="op">(</span>model <span class="op">=</span> <span class="va">mkn</span>, n <span class="op">=</span> <span class="fl">3</span>, max_length <span class="op">=</span> <span class="fl">10</span>, t <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>
<span class="co">#&gt; [1] "i have studied eight or nine truly by your office [...] (truncated output)"</span>
<span class="co">#&gt; [2] "ere you go : &lt;EOS&gt;"                                                        </span>
<span class="co">#&gt; [3] "don pedro welcome signior : &lt;EOS&gt;"</span>
<span class="fu"><a href="reference/sample_sentences.html">sample_sentences</a></span><span class="op">(</span>model <span class="op">=</span> <span class="va">mkn</span>, n <span class="op">=</span> <span class="fl">3</span>, max_length <span class="op">=</span> <span class="fl">10</span>, t <span class="op">=</span> <span class="fl">0.1</span><span class="op">)</span>
<span class="co">#&gt; [1] "i will not be sworn but love may transform me [...] (truncated output)" </span>
<span class="co">#&gt; [2] "i will not fail . &lt;EOS&gt;"                                                </span>
<span class="co">#&gt; [3] "i will go to benedick and counsel him to fight [...] (truncated output)"</span>
<span class="fu"><a href="reference/sample_sentences.html">sample_sentences</a></span><span class="op">(</span>model <span class="op">=</span> <span class="va">mkn</span>, n <span class="op">=</span> <span class="fl">3</span>, max_length <span class="op">=</span> <span class="fl">10</span>, t <span class="op">=</span> <span class="fl">10</span><span class="op">)</span>
<span class="co">#&gt; [1] "july cham's incite start ancientry effect torture tore pains endings [...] (truncated output)"   </span>
<span class="co">#&gt; [2] "lastly gallants happiness publish margaret what by spots commodity wake [...] (truncated output)"</span>
<span class="co">#&gt; [3] "born all's 'fool' nest praise hurt messina build afar dancing [...] (truncated output)"</span></code></pre></div>
</div>
<div id="getting-help" class="section level2">
<h2 class="hasAnchor">
<a href="#getting-help" class="anchor"></a>Getting Help</h2>
<p>For further help, you can consult the reference page of the <code>kgrams</code> <a href="https://vgherard.github.io/kgrams/">website</a> or <a href="https://github.com/vgherard/kgrams/issues">open an issue</a> on the GitHub repository of <code>kgrams</code>. A vignette is available on the website, illustrating the process of building language models in-depth.</p>
</div>
<div id="development" class="section level2">
<h2 class="hasAnchor">
<a href="#development" class="anchor"></a>Development</h2>
<p>This project is in an early developmental stage, thorough tests of the algorithms and unit tests still need to be implemented, many computations leave some room for optimization, the API may change, <em>etc.</em>. If you feel like contributing to <code>kgrams</code>, here’s is some useful information.</p>
<p>Development of <code>kgrams</code> takes place on its <a href="https://github.com/vgherard/kgrams/">GitHub repository</a>. If you find a bug, please let me know by <a href="https://github.com/vgherard/kgrams/issues">opening an issue</a>, and if you have any ideas or proposals for improvement, please feel welcome to <a href="https://github.com/vgherard/kgrams/pulls">send a pull request</a>, or simply an e-mail at <a href="mailto:vgherard@sissa.it" class="email">vgherard@sissa.it</a>.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Download from CRAN at <br><a href="https://cloud.r-project.org/package=kgrams">https://​cloud.r-project.org/​package=kgrams</a>
</li>
<li>Browse source code at <br><a href="https://github.com/vgherard/kgrams/">https://​github.com/​vgherard/​kgrams/​</a>
</li>
<li>Report a bug at <br><a href="https://github.com/vgherard/kgrams/issues">https://​github.com/​vgherard/​kgrams/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li>GPL (&gt;= 3)</li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Valerio Gherardi <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0002-8215-3013" target="orcid.widget" aria-label="ORCID"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
</ul>
</div>

  <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://lifecycle.r-lib.org/articles/stages.html"><img src="https://img.shields.io/badge/lifecycle-experimental-orange.svg" alt="Lifecycle: experimental"></a></li>
<li><a href="https://CRAN.R-project.org/package=kgrams"><img src="https://www.r-pkg.org/badges/version/kgrams" alt="CRAN status"></a></li>
<li><a href="https://CRAN.R-project.org/package=kgrams"><img src="http://cranlogs.r-pkg.org/badges/grand-total/kgrams" alt="CRAN downloads"></a></li>
<li><a href="https://circleci.com/gh/vgherard/kgrams"><img src="https://circleci.com/gh/vgherard/kgrams.svg?style=svg" alt="CircleCI build status"></a></li>
<li><a href="https://ci.appveyor.com/project/vgherard/kgrams"><img src="https://ci.appveyor.com/api/projects/status/github/vgherard/kgrams?branch=main&amp;svg=true" alt="AppVeyor build status"></a></li>
<li><a href="https://github.com/vgherard/kgrams/actions"><img src="https://github.com/vgherard/kgrams/workflows/R-CMD-check/badge.svg" alt="R-CMD-check"></a></li>
<li><a href="https://codecov.io/gh/vgherard/kgrams?branch=main"><img src="https://codecov.io/gh/vgherard/kgrams/branch/main/graph/badge.svg" alt="Codecov test coverage"></a></li>
</ul>
</div>
</div>
</div>


      <footer><div class="copyright">
  <p>Developed by Valerio Gherardi.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
